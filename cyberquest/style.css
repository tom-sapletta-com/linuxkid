*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { background: #0a0b10; overflow-x: hidden; -webkit-tap-highlight-color: transparent; }
input, button { font-family: inherit; }
button { -webkit-tap-highlight-color: transparent; }

.app-nav { background:#0d0e16; border-bottom:2px solid #1a1c2e; padding:10px 16px; display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; z-index:100; }
.app-nav .logo { display:flex; align-items:center; gap:10px; }
.app-nav .logo-icon { font-size:28px; }
.app-nav .logo-text { font-weight:900; font-size:18px; color:#c0caf5; }
.app-nav .logo-sub { font-size:12px; color:#f7768e; font-weight:700; margin-left:4px; }
.app-nav .nav-center { display:flex; align-items:center; gap:6px; }
.app-nav .progress-text { font-size:14px; color:#7982a9; font-weight:700; }
.app-nav .progress-bar { width:120px; height:8px; background:#1a1c2e; border-radius:100px; overflow:hidden; }
.app-nav .progress-fill { height:100%; background:linear-gradient(90deg,#f7768e,#ff9e64); border-radius:100px; transition:width 0.5s; }
.app-nav .agent-btn { background:#161822; border:2px solid #1a1c2e; border-radius:10px; padding:6px 14px; color:#c0caf5; cursor:pointer; font-size:14px; font-weight:700; }

.step-dots { display:flex; gap:6px; align-items:center; }
.step-dots .label { font-size:13px; color:#7982a9; font-weight:600; }
.step-dot { height:10px; border-radius:100px; border:none; cursor:pointer; transition:all 0.3s; min-width:28px; }
.step-dot.active { min-width:40px; }

.main-layout { display:flex; max-width:1270px; margin:0 auto; padding:18px; gap:18px; }
.sidebar { width:260px; flex-shrink:0; }
.sidebar .lesson-title { font-size:15px; font-weight:800; margin-bottom:6px; display:flex; align-items:center; gap:6px; }
.sidebar .layer-btn { display:block; width:100%; text-align:left; border-radius:12px; padding:10px 14px; cursor:pointer; margin-bottom:4px; font-family:inherit; }
.sidebar .layer-btn .name { font-size:14px; display:flex; align-items:center; gap:6px; }
.sidebar .layer-btn .count { font-size:12px; color:#5a6082; margin-top:2px; margin-left:22px; }
.content { flex:1; min-width:0; }
.right-panel { width:300px; flex-shrink:0; }

.lesson-header { border-radius:16px; padding:20px; margin-bottom:16px; }
.lesson-header .cat { font-size:13px; font-weight:800; text-transform:uppercase; letter-spacing:1px; margin-bottom:6px; }
.lesson-header h2 { font-size:24px; font-weight:900; margin:0 0 8px; color:#c0caf5; }
.lesson-header .desc { font-size:15px; color:#7982a9; line-height:1.7; }
.lesson-header .analogy { background:#0a0b1088; border-radius:12px; padding:14px; margin-top:12px; font-size:15px; color:#a9b1d6; line-height:1.7; white-space:pre-wrap; }

.instruction-box { border-radius:14px; padding:16px; margin-bottom:16px; }
.instruction-box .text { font-size:17px; font-weight:700; color:#c0caf5; margin-bottom:8px; line-height:1.5; }
.instruction-box .code-row { display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.instruction-box code { display:inline-block; background:#0c0e14; color:#f7768e; padding:8px 16px; border-radius:10px; font-family:'JetBrains Mono',monospace; font-size:16px; border:2px solid #1a1c2e; word-break:break-all; flex:1; min-width:0; }
.copy-code-btn { background:#ffffff22; color:#c0caf5; border:1px solid #ffffff33; border-radius:8px; padding:6px 10px; cursor:pointer; font-size:16px; flex-shrink:0; transition:background 0.2s; }
.copy-code-btn:hover { background:#ffffff33; }
.copy-code-btn.copied { background:#73daca22; color:#73daca; border-color:#73daca44; }

.celebrate { border-radius:16px; padding:24px; margin-bottom:16px; text-align:center; }
.celebrate .icon { font-size:56px; }
.celebrate .title { font-size:22px; font-weight:800; margin-bottom:8px; }
.celebrate .sub { font-size:15px; margin-bottom:16px; }
.celebrate .next-btn { background:linear-gradient(135deg,#f7768e,#ff9e64); color:#0a0b10; border:none; border-radius:12px; padding:14px 32px; font-weight:800; font-size:17px; cursor:pointer; font-family:inherit; }

.terminal { background:#0c0e14; border-radius:16px; overflow:hidden; font-family:'JetBrains Mono','Fira Code',monospace; border:2px solid #1a1c2e; }
.terminal .bar { background:#161822; padding:10px 16px; display:flex; align-items:center; gap:8px; border-bottom:2px solid #1a1c2e; }
.terminal .dot { width:14px; height:14px; border-radius:50%; }
.terminal .bar-label { color:#7982a9; margin-left:8px; font-size:14px; }
.terminal .body { padding:16px; min-height:200px; max-height:350px; overflow-y:auto; cursor:text; font-size:15px; }
.terminal .body .placeholder { color:#5a6082; font-size:14px; margin-bottom:8px; }
.terminal .prompt { color:#f7768e; }
.terminal .cmd { color:#c0caf5; }
.terminal .output { white-space:pre-wrap; padding-left:10px; margin-left:4px; }
.terminal .output.ok { color:#a9b1d6; border-left:3px solid #73daca; }
.terminal .output.err { color:#f7768e; border-left:3px solid #f7768e; }
.terminal .input-row { display:flex; align-items:center; }
.terminal input { background:transparent; border:none; color:#c0caf5; font-family:inherit; font-size:inherit; outline:none; flex:1; caret-color:#f7768e; min-width:0; }
.terminal .footer { background:#161822; padding:10px 16px; border-top:2px solid #1a1c2e; display:flex; gap:8px; flex-wrap:wrap; }
.hint-btn { border-radius:10px; padding:8px 16px; cursor:pointer; font-family:inherit; font-size:14px; font-weight:600; }
.hint-show { background:#2a2e44; color:#c0caf5; border:none; }
.hint-ask { background:transparent; color:#7982a9; border:2px solid #2a2e44; }

.threat-map { background:#12141e; border-radius:16px; padding:16px; border:2px solid #1a1c2e; }
.threat-map .title { font-size:14px; color:#f7768e; margin-bottom:10px; font-weight:700; }
.threat-map .grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.threat-map .node { border-radius:12px; padding:12px; text-align:center; transition:all 0.3s; }
.threat-map .node .emoji { font-size:32px; }
.threat-map .node .name { font-size:13px; font-weight:700; margin-top:4px; }
.threat-map .node .status { font-size:12px; margin-top:2px; font-weight:700; }
.threat-map .firewall-bar { background:#f7768e22; border:1px solid #f7768e44; border-radius:10px; padding:8px; text-align:center; margin:10px 0; }
.threat-map .firewall-bar span { color:#f7768e; font-size:13px; font-weight:700; }

.glossary { background:#12141e; border-radius:16px; padding:16px; border:2px solid #1a1c2e; margin-top:16px; }
.glossary .title { font-size:14px; font-weight:700; color:#ff9e64; margin-bottom:10px; }
.glossary .row { display:flex; align-items:center; gap:6px; font-size:13px; color:#7982a9; margin-bottom:4px; }
.glossary .row .icon { width:20px; text-align:center; }
.glossary .row .term { color:#a9b1d6; font-weight:600; min-width:80px; }

.alert-box { background:#f7768e08; border:2px solid #f7768e22; border-radius:14px; padding:14px; margin-top:16px; }
.alert-box .title { font-size:15px; font-weight:700; color:#f7768e; margin-bottom:8px; }
.alert-box .text { font-size:14px; color:#7982a9; line-height:1.7; }

.pick-screen { min-height:100vh; background:#0a0b10; display:flex; align-items:center; justify-content:center; font-family:'Nunito',system-ui,sans-serif; padding:24px; }
.pick-screen .inner { max-width:620px; text-align:center; width:100%; }
.pick-screen .big-icon { font-size:72px; }
.pick-screen h1 { color:#c0caf5; font-size:34px; font-weight:900; margin:10px 0; }
.pick-screen .subtitle { color:#f7768e; font-size:18px; font-weight:700; margin-bottom:6px; }
.pick-screen .meta { color:#7982a9; font-size:15px; margin-bottom:28px; }
.pick-screen .grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.pick-screen .agent-card { background:#12141e; border-radius:16px; padding:24px 16px; cursor:pointer; text-align:center; transition:all 0.2s; }
.pick-screen .agent-card .emoji { font-size:56px; }
.pick-screen .agent-card .name { font-weight:800; font-size:18px; margin-top:8px; }
.pick-screen .agent-card .role { color:#5a6082; font-size:14px; margin-top:4px; }
.pick-screen .agent-card .codename { color:#7982a9; font-size:14px; font-family:monospace; margin-top:4px; }

.menu-toggle { display:none; background:#161822; border:2px solid #1a1c2e; border-radius:10px; padding:8px 14px; color:#c0caf5; cursor:pointer; font-size:22px; }

@media (max-width: 768px) {
  .main-layout { flex-direction:column; padding:12px; gap:12px; }
  .sidebar { width:100%; display:none; }
  .sidebar.open { display:block; }
  .right-panel { width:100%; }
  .menu-toggle { display:block; }
  .app-nav { padding:8px 12px; }
  .app-nav .logo-text { font-size:16px; }
  .app-nav .logo-icon { font-size:24px; }
  .app-nav .progress-bar { width:80px; }
  .pick-screen h1 { font-size:28px; }
  .pick-screen .big-icon { font-size:60px; }
  .pick-screen .agent-card .emoji { font-size:48px; }
  .pick-screen .agent-card { padding:18px 12px; }
  .terminal .body { font-size:14px; min-height:160px; max-height:300px; }
  .instruction-box code { font-size:14px; padding:6px 12px; }
}
