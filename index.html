<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Planeta X â€“ Centrum Misji</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="style.css"/>
  <script src="progress.js"></script>
  <script src="i18n.js"></script>
</head>
<body>
  <div class="hub">

    <div class="hub-hero">
      <div class="planet">ğŸª</div>
      <h1>Planeta <span>X</span></h1>
      <p class="tagline">Akademia MÅ‚odego Odkrywcy</p>
      <p class="sub">Wybierz misjÄ™ i wyrusz w przygodÄ™ ze Å›wiatem komputerÃ³w!</p>
    </div>

    <p class="section-title">ğŸš€ Twoje misje</p>
    <div class="missions-grid" id="missions-grid"></div>

    <div class="skills-bar">
      <h3>ğŸ† UmiejÄ™tnoÅ›ci do zdobycia</h3>
      <div class="skills-list" id="skills-list"></div>
    </div>

    <div class="footer-hub">
      <p>Planeta X â€“ Akademia MÅ‚odego Odkrywcy &nbsp;Â·&nbsp; <a href="https://github.com/tom-sapletta-com/linuxkid">GitHub</a> &nbsp;Â·&nbsp; Autor: <a href="mailto:tom@sapletta.com">Tom Sapletta</a> &nbsp;Â·&nbsp; <a href="config.html">ğŸ”§ Diagnostyka</a></p>
      <div id="lang-bar" style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center;"></div>
    </div>

  </div>

  <script>
    const MISSION_DATA = [
      {
        id: 'przylot', num: '01', icon: 'ğŸš—', title: 'Przylot na PlanetÄ™ X',
        color: '#7aa2f7', color2: '#73daca', folder: 'przylot',
        story: '"TwÃ³j statek wÅ‚aÅ›nie wylÄ…dowaÅ‚. Musisz nauczyÄ‡ siÄ™ poruszaÄ‡ po planecie â€“ poznaÄ‡ jej drogi, samochody i zasady."',
        desc: 'Podstawy terminala Linux przez analogiÄ™ do samochodÃ³w i miasta. Naucz siÄ™ kto jeÅºdzi po drogach, jak wysyÅ‚aÄ‡ wiadomoÅ›ci i zarzÄ…dzaÄ‡ plikami.',
        tags: [['Terminal','#7aa2f7'],['SieÄ‡','#73daca'],['Pliki','#9ece6a'],['Uprawnienia','#e0af68']],
        skills: ['ğŸš— Terminal Linux','ğŸ›£ï¸ SieÄ‡ TCP/IP','ğŸ“ System plikÃ³w','ğŸ‘¥ UÅ¼ytkownicy'],
        ready: true,
      },
      {
        id: 'cyberquest', num: '02', icon: 'ğŸ›¡ï¸', title: 'CyberQuest',
        color: '#f7768e', color2: '#ff9e64', folder: 'cyberquest',
        story: '"UkoÅ„czyÅ‚eÅ› szkolenie. Rada Planety X mianuje CiÄ™ Tajnym Agentem CyberbezpieczeÅ„stwa. WrÃ³g atakuje z Galaktyki Darknet!"',
        desc: 'ZostaÅ„ agentem i obroÅ„ PlanetÄ™ X przed cyberatakami. Firewall, szyfrowanie, SSH, monitoring logÃ³w i Å‚atanie dziur bezpieczeÅ„stwa.',
        tags: [['Firewall','#f7768e'],['Szyfrowanie','#ff9e64'],['SSH','#7aa2f7'],['Monitoring','#73daca']],
        skills: ['ğŸ§± Firewall','ğŸ” Szyfrowanie','ğŸ”‘ SSH','ğŸ“¡ Logi'],
        ready: true,
      },
      {
        id: 'serwer', num: '03', icon: 'ğŸŒ', title: 'Serwer Planety X',
        color: '#9ece6a', color2: '#73daca', folder: 'serwer',
        story: '"Planeta X potrzebuje wÅ‚asnej strony WWW. Twoim zadaniem jest uruchomienie serwera i pokazanie planety caÅ‚emu wszechÅ›wiatowi!"',
        desc: 'Postaw wÅ‚asny serwer WWW, skonfiguruj domenÄ™, zainstaluj certyfikat SSL i opublikuj stronÄ™ Planety X w internecie.',
        tags: [['Nginx','#9ece6a'],['SSL/HTTPS','#73daca'],['DNS','#7aa2f7'],['Docker','#e0af68']],
        skills: ['ğŸŒ Serwer WWW','ğŸ“œ SSL/HTTPS'],
        ready: true,
      },
      {
        id: 'automatyzacja', num: '04', icon: 'ğŸ¤–', title: 'Automatyzacja',
        color: '#bb9af7', color2: '#7aa2f7', folder: 'automatyzacja',
        story: '"Planeta X roÅ›nie! RÄ™czne zarzÄ…dzanie to za maÅ‚o. Czas stworzyÄ‡ roboty â€“ skrypty, ktÃ³re pracujÄ… za Ciebie 24/7."',
        desc: 'Pisz skrypty bash, automatyzuj zadania z cron, twÃ³rz pipeline\'y i zarzÄ…dzaj wieloma serwerami naraz za pomocÄ… Ansible.',
        tags: [['Bash','#bb9af7'],['Cron','#7aa2f7'],['Ansible','#73daca'],['CI/CD','#f7768e']],
        skills: ['ğŸ¤– Skrypty Bash','â° Cron'],
        ready: true,
      },
      {
        id: 'konteneryzacja', num: '05', icon: 'ğŸ³', title: 'Konteneryzacja',
        color: '#e0af68', color2: '#ff9e64', folder: 'konteneryzacja',
        story: '"Twoje aplikacje muszÄ… dziaÅ‚aÄ‡ wszÄ™dzie â€“ na kaÅ¼dej planecie, w kaÅ¼dej galaktyce. Czas zapakowaÄ‡ je w kontenery!"',
        desc: 'Poznaj Docker i Kubernetes. Buduj obrazy, uruchamiaj kontenery, orkiestruj klastry i wdraÅ¼aj aplikacje w chmurze.',
        tags: [['Docker','#e0af68'],['Kubernetes','#7aa2f7'],['Helm','#73daca'],['Cloud','#9ece6a']],
        skills: ['ğŸ³ Docker','â˜¸ï¸ Kubernetes'],
        ready: true,
      },
      {
        id: 'kod', num: '06', icon: 'ğŸ§¬', title: 'Kod Planety X',
        color: '#f7768e', color2: '#bb9af7', folder: 'kod',
        story: '"Planeta X potrzebuje wÅ‚asnych programÃ³w. Czas nauczyÄ‡ siÄ™ pisaÄ‡ kod â€“ tworzyÄ‡ narzÄ™dzia, ktÃ³re zmieniajÄ… Å›wiat!"',
        desc: 'Pierwsze kroki w programowaniu: Python, skrypty systemowe, API, bazy danych i tworzenie wÅ‚asnych narzÄ™dzi dla Planety X.',
        tags: [['Python','#f7768e'],['API','#7aa2f7'],['SQLite','#73daca'],['Git','#9ece6a']],
        skills: ['ğŸ Python','ğŸ—„ï¸ Bazy danych'],
        ready: true,
      },
    ];

    const pm = new ProgressManager();

    function renderMissions() {
      const grid = document.getElementById('missions-grid');
      grid.innerHTML = '';

      MISSION_DATA.forEach(m => {
        const unlocked = pm.isMissionUnlocked(m.id);
        const complete = pm.backend.isMissionComplete(m.id);
        const progress = pm.backend.getProgress(m.id);
        const canPlay = unlocked && m.ready;
        const isLocked = !unlocked;

        const el = document.createElement(canPlay ? 'a' : 'div');
        if (canPlay) el.href = m.folder + '/index.html';
        el.className = 'mission-card ' + (canPlay ? 'available' : 'coming-soon');
        el.style.cssText = `background:linear-gradient(135deg,${m.color}08,${m.color2}08);border:2px solid ${m.color}${isLocked?'11':'33'};${isLocked?'opacity:0.5;':''}`;

        let badge, statusLine;
        if (complete) {
          badge = `<span class="badge badge-available">ğŸ† UkoÅ„czona</span>`;
          statusLine = `<div class="progress-line"><div class="progress-fill" style="width:100%;background:linear-gradient(90deg,${m.color},${m.color2})"></div></div><div style="margin-top:6px;font-size:12px;color:#73daca;font-weight:700;">100% ukoÅ„czone</div>`;
        } else if (canPlay) {
          badge = `<span class="badge badge-available">âœ… DostÄ™pna</span>`;
          const pct = progress.percent || 0;
          statusLine = pct > 0
            ? `<div class="progress-line"><div class="progress-fill" style="width:${pct}%;background:linear-gradient(90deg,${m.color},${m.color2})"></div></div><div style="margin-top:6px;font-size:12px;color:${m.color};font-weight:700;">${pct}% ukoÅ„czone</div>`
            : `<div class="cta" style="background:linear-gradient(135deg,${m.color},${m.color2});color:#0a0b10;border-radius:12px;margin-top:16px;">Rozpocznij misjÄ™ â†’</div>`;
        } else if (!m.ready && unlocked) {
          badge = `<span class="badge badge-soon">ğŸ”§ W przygotowaniu</span>`;
          statusLine = `<div style="margin-top:16px;font-size:13px;color:#5a6082;font-weight:700;">â³ WkrÃ³tce dostÄ™pna...</div>`;
        } else if (isLocked) {
          const reqNames = MISSIONS.filter(x => pm.getMissionDef(m.id)?.requires.includes(x.id)).map(x => x.title);
          badge = `<span class="badge badge-planned">ğŸ”’ Zablokowana</span>`;
          statusLine = `<div style="margin-top:16px;font-size:13px;color:#5a6082;font-weight:700;">ğŸ”’ Wymaga: ${reqNames.join(', ')}</div>`;
        } else {
          badge = `<span class="badge badge-planned">ğŸ“‹ Planowana</span>`;
          statusLine = `<div style="margin-top:16px;font-size:13px;color:#5a6082;font-weight:700;">ğŸ“‹ W planach...</div>`;
        }

        el.innerHTML = `
          ${badge}
          <span class="num" style="color:${m.color}">Misja ${m.num}</span>
          <span class="icon">${m.icon}</span>
          <h2>${m.title}</h2>
          <p class="story" style="border-color:${m.color}">${m.story}</p>
          <p class="desc">${m.desc}</p>
          <div class="tags">${m.tags.map(([t,c])=>`<span class="tag" style="background:${c}22;color:${c}">${t}</span>`).join('')}</div>
          ${statusLine}
        `;
        grid.appendChild(el);
      });
    }

    function renderSkills() {
      const list = document.getElementById('skills-list');
      list.innerHTML = '';
      const allSkills = MISSION_DATA.flatMap(m => m.skills.map(s => ({
        label: s,
        unlocked: pm.backend.isMissionComplete(m.id),
      })));
      allSkills.forEach(s => {
        const div = document.createElement('div');
        div.className = 'skill ' + (s.unlocked ? 'unlocked' : 'locked');
        div.textContent = s.label;
        list.appendChild(div);
      });
    }

    function renderLangBar() {
      const bar = document.getElementById('lang-bar');
      if (!bar || typeof PlanetaI18n === 'undefined') return;
      const langs = PlanetaI18n.getLanguages();
      const current = PlanetaI18n.getLang();
      bar.innerHTML = Object.entries(langs).map(([code, info]) =>
        `<button onclick="setLang('${code}')" style="background:${code===current?'#7aa2f722':'transparent'};border:1px solid ${code===current?'#7aa2f744':'#1e2030'};border-radius:8px;padding:4px 10px;cursor:pointer;font-size:13px;color:${code===current?'#7aa2f7':'#7982a9'};font-family:inherit;">${info.flag} ${info.name}</button>`
      ).join('');
    }

    function setLang(code) {
      if (typeof PlanetaI18n !== 'undefined') { PlanetaI18n.setLang(code); }
      renderLangBar();
    }

    renderMissions();
    renderSkills();
    renderLangBar();
  </script>
</body>
</html>
